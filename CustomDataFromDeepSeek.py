# coding=utf-8
from openai import OpenAI

key = "sk-a0f50f56efff4bc9aa35a480ba9f70ec"
client = OpenAI(
    api_key=key,
    base_url="https://api.deepseek.com")


'''
 content为输入的用户的用于分析的文本
 这个类的作用是调用大模型api，根据用户的情感态度文本，让ai基于此去完成问卷的回答，输出格式为一个数组，里面每一个元素是每一题的选项
'''
def get_custom_data_from_deepSeek(content):
    # 这是prompt的模版，将用户内容填充到prompt中去
    promptTemplate = f"我需要基于特定用户的创业观点语录，完成一份调研问卷的回答推断。以下是任务背景、核心依据及具体要求，烦请严格按规则执行：\n 一、核心依据：用户创业观点语录 \n 用户对创业的想法与态度如下，所有推断需完全基于此内容 (下列三引号中的内容)，不得添加外部假设：\n'''{content}'''\n 二、问卷推断规则与要求 \n 问卷共 46 题，分为「选择题（1-7 题）」和「打分题（8-46 题）」两类，需按以下规则输出结果：\n1. 选择题（1-7 题）：固定选项对应数字 \n 每题有明确选项，按「选项顺序」对应数字（第 1 个选项 = 1，第 2 个选项 = 2，以此类推），需基于语录中用户的思维逻辑、认知深度推断，无明确依据时优先选择「符合创业认知成熟度」的选项：\n 性别（男 = 1，女 = 2）\n 年级（大一 = 1，大二 = 2，大三 = 3，大四 = 4，研一 = 5，研二 = 6，研三 = 7，博士 = 8）\n 学校类型（985=1，211=2，一本 = 3，其他 = 4）\n 专业类型（理工科 = 1，商科 = 2，文科 = 3，其他 = 4）\n 家庭所在地类型（大城市 = 1，中小城市 = 2，乡镇 = 3，农村 = 4）\n 地域分布（南方 = 1，北方 = 2）\n 身边亲戚好友是否有创业经历（没有 = 1，有但不了解 = 2，有且很了解 = 3）\n2. 打分题（8-46 题）：1-7 分梯度对应 \n 打分范围为 1-7 分，分数需体现梯度差异（严禁严禁！！！大面积重复最高分 7 或最低分 1），需结合语录中用户的观点匹配度推断：\n7 分：描述与用户观点高度贴合（完全符合其对创业的认知、态度，这一个等级应该最难得到，除非描述完全符合，不达到这种极限条件，不应该给出7分）\n6 分：描述与用户观点较贴合（核心逻辑一致，细节略有差异）\n5 分：描述与用户观点部分贴合（有一致点，也有未提及的内容）\n4 分：描述与用户观点中性（无明确支持 / 反对依据，仅基于常识推断）\n3 分：描述与用户观点部分不贴合（部分逻辑冲突，或用户未体现相关倾向）\n2 分：描述与用户观点较不贴合（核心逻辑有冲突）\n1 分：描述与用户观点完全不贴合（与用户明确表达的态度相反）\n 具体打分题题干：\n8. 学校积极制定了创业相关的帮扶政策（如奖学金、孵化器申请）\n9. 学校通过宣传栏、公众号平台等渠道，鼓励支持大学生创业 \n10. 学校和企业提供创业实践机会，激发我们的内在动机和个人兴趣 \n11. 学校支持那些基于个人兴趣或社会价值的初创项目，而非仅看重商业利润 \n12. 学校教师开设创业咨询服务为学生免费指导 \n13. 当进行创业课程学习或活动时，我的创业课老师积极支持我 \n14. 我认为创业课程的培养目标匹配我个人的发展 \n15. 学校会邀请优秀创业校友和大家进行经验分享活动 \n16. 学校会定期举办创新创业大赛，允许我们自由探索并实践自己的想法 \n17. 创业教育培养了我所需的社会交往和团队领导能力 \n18. 学校注重学生创业精神的培养 \n19. 我对我所接受的创业教育感到满意 \n20. 我的新事业将通过其内在的创新价值与服务理念构建深度的用户关系和社区认同来避免竞争 \n21. 我经常看到我的计划与他人的目标、才能和资源相互契合，共同创造更大的价值 \n22. 我所控制的团队人员与资源效能有所增长，能引导资金服务于事业的可持续成长与价值创造 \n23. 我相信，除了专业技能，自我认知、同理心与持续学习的能力是创业者更重要的素养 \n24. 我善于洞察人、事物与理念之间新的联结方式，从而发现创造价值的新途径 \n25. 我通过理解众多创业故事背后的选择与结果，来深化对人性与价值的认知 \n26. 我认为，比 “如何创建企业” 更重要的是理解 “创业如何促进个人与社会的共同成长”\n27. 我相信，成功的企业常常源于对深层人性需求的真诚回应，而非机械遵循某种模式 \n28. 如果我有机会，我会选择从事富有社会责任的自主创业 \n29. 即使在各种限制条件下，我仍会选择以创造共享价值为目标的自主创业 \n30. 我决心在未来创建一家注重可持续发展与社会福祉的公司 \n31. 出于对自我实现和以人为本理念的追求，我曾经考虑过自我雇佣 \n32. 我拥有强大的内在驱动力，并视与他人协作为丰富视角、共同成长的机会 \n33. 新的环境能激发我的学习动力与适应能力 \n34. 我愿意为我深信不疑的价值主张投入资源，即使它尚未被完全验证 \n35. 我愿意为团队成员的成长与发展承担责任，因为这与我对于成功的定义相一致 \n36. 我认为，错失良机的根源往往在于准备不足或洞察不够深入，而非单纯的动作迟缓 \n37. 我总是主动寻找改善生活的新方法 \n38. 无论我在哪里，我通常都是推动建设性变革的重要力量 \n39. 不管遇到多少阻力，只要我相信某件事是对的，我就会让它发生 \n40. 没有什么比看到我的想法变为现实更令人兴奋的了 \n41. 我善于发现机会 \n42. 如果我看到我不喜欢的东西，我会设法去改变它 \n43. 我善于把问题转化为机会 \n44. 我感到有动力去改变我的社区，甚至改变世界 \n45. 我倾向于让别人主动去开始新项目，而不是我自己 \n46. 当我遇到问题时，我会直面它 \n 三、最终输出格式 \n 需输出一个 Python 数组，包含 46 个整数（依次对应 1-46 题的答案），格式示例：[1,4,2,2,1,1,2,4,5,...]，确保无语法错误，可直接用于 Python 代码中(除了数组，别的什么都不要返回，返回内容只需要一个数组)。"

    response = client.chat.completions.create(
        model="deepseek-chat",
        messages=[
            {"role": "system", "content": "Hey, boy! You are an analysis master"},
            {"role": "user", "content": promptTemplate},
        ],
        stream=False
    )
    raw_res = response.choices[0].message.content[1:-1]
    return [int(num_str) for num_str in raw_res.split(",")]


if __name__ == '__main__':
    testContent = "# 创业的真正魅力：超越财富的深层价值 \n 当被问及 “创业的真正魅力是什么”，多数人的第一反应往往是 “钱”—— 但财富只是创业价值中最浅显的一层。真正能驱动人穿越艰难、坚守长期的魅力，藏在更深刻的自我重塑与认知突破里，具体可归结为四个核心维度：\n\n\n## 一、在 “极端真实” 中看清自己 \n 创业会将人推向一个毫无遮蔽的现实环境，让你与世界 “赤膊相见”：你做出的每一个决策、犯下的每一个错误、抓住的每一个机会，都不会被模糊的反馈掩盖，反而会在极短时间内呈现明确结果。在这里，没有 “拖延的余地”，也没有 “逃避的空间”—— 你思考的质量、反应的速度、执行的力度，会直接转化为你的处境：可能是项目的快速增长，也可能是问题的集中爆发。\n\n 正是这种 “结果即时反馈” 的机制，让你第一次真切地认知自己：你真正想要的是什么（是短期收益还是长期价值）？能为目标放弃什么（是休闲时间还是固有舒适区）？自己的底线又在哪里（是坚守原则还是妥协利益）。这种对自我的清晰认知，是任何安稳环境都无法给予的 “镜子”。\n\n\n## 二、重构认知边界，打破 “可能性限制”\n 创业最隐秘的魅力之一，是它会不断推翻你对 “不可能” 的预设 —— 你会逐渐发现，很多你以为 “做不到” 的事，其实只是 “没人尝试过”；很多看似无法突破的 “天花板”，只是因为你站立的视角太低。\n\n 当你一次次推动项目突破自己预设的限制（比如从 0 到 1 做出第一个产品、从 10 到 100 拓展第一批客户），你对 “可能性” 的理解会彻底重构：原来世界不是非黑即白的 “能” 与 “不能”，而是存在无数待挖掘的中间地带。这种认知上的 “扩容”，会让你看待问题、看待世界的方式发生根本改变，从此不再被固有思维束缚。\n\n\n## 三、掌握定义规则的 “创造感”\n 创业更核心的魅力，在于它让你摆脱 “遵循他人规则” 的被动 —— 不是所有事情都要按行业既定的玩法走，你完全可以基于自己的判断，找到属于自己的路径。\n\n 这个过程中，你需要亲手构建一个完整的系统：从打磨产品解决用户需求，到搭建团队凝聚协作力量，再到打通渠道实现价值流转。你会看着这个系统从 “无” 到 “有”、从 “不稳定” 到 “稳步运转”，每一个环节的优化都源于你的决策，每一次成长都出自你的设计。这种 “从 0 到 1 创造并掌控系统” 的体验，会带来极强的成就感与掌控感，让你意识到自己不仅是规则的遵守者，更是规则的制定者。\n\n\n## 四、拥有掌控人生的 “主动权”\n 创业赋予的主动权，不是空洞的 “自由”，而是实实在在的 “分配权”—— 对资源的分配权（知道如何调动资金、人脉解决问题）、对时间的分配权（能自主规划优先级，而非被动应付任务）、对决策的分配权（可以按自己的长期目标做选择，而非受制于他人指令）。\n\n 随着能力的积累，你会逐渐进入一种 “从容应对变化” 的状态：当新的机会出现时，你有足够的资源和判断力立刻接住；当突发风险来临时，你有提前铺垫的退路可走。这种主动权，让你的人生不再只有 “按部就班” 一条轨迹，而是拥有多个 “备选方案”，从此不再被动接受命运的安排，而是主动塑造自己的人生走向。\n\n\n 所以，在我看来，创业的真正魅力从不是赚到多少财富，而是它能给你带来伴随一生的深层改变：在极端真实的反馈中看清自己，在一次次突破中拓宽认知，在创造系统中掌握规则，在积累中拥有人生的主动权。这些看不见的成长，比任何一笔具体的收入都更珍贵，也更能定义一个人的人生高度。"
    res = get_custom_data_from_deepSeek(testContent)
    print(res[0])
    print(res[1])
    print(res)